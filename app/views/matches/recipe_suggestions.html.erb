<pre><%= session[:match_data].pretty_inspect %></pre>
<div class="card-container mt-5 mb-3">
  <h1 class="text-center mb-5">Which recipe would you like to select?</h1>

  <div data-controller="recipe-suggestions">
    <div class="cards row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-5 g-4 justify-content-center">
      <% @recipes.each do |recipe| %>
        <div class="col d-flex">
          <div
            class="card selectable-card shadow-sm w-100"
            data-id="<%= recipe.id %>"
            data-action="click->recipe-suggestions#select"
            data-recipe-suggestions-target="card"
          >
            <img
              src="https://images.unsplash.com/photo-1611270629569-8b357cb88da9?q=80&w=1887&auto=format&fit=crop"
              class="card-img"
              alt="<%= recipe.name %>">

            <div class="recipe-name">
              <%= recipe.name %>
            </div>

            <div class="card-body">
              <p class="card-text small text-muted"><%= recipe.description %></p>
              <button
                class="btn btn-primary ingredients"
                data-controller="modal"
                data-action="click->modal#open"
                data-modal-id="ingredientsModal<%= recipe.id %>">
                View Ingredients
              </button>
            </div>
          </div>
        </div>

        <!-- Modal -->
        <div
          class="modal"
          id="ingredientsModal<%= recipe.id %>"
          data-controller="modal"
          data-modal-target="modal"
          aria-hidden="true"
          tabindex="-1"
        >
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title"><%= recipe.name %> Ingredients</h5>
                <button type="button" class="btn-close" data-action="modal#close" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <ul>
                  <% recipe.ingredients.split("\n").each do |ingredient| %>
                    <li><%= ingredient %></li>
                  <% end %>
                </ul>
              </div>
              <div class="modal-footer">
                <button class="btn btn-secondary" data-action="modal#close">Close</button>
              </div>
            </div>
          </div>
        </div>
      <% end %>
    </div>

    <div class="text-center mt-5">
      <%= form_with url: matches_path, method: :post, id: "match-form" do %>
        <%= hidden_field_tag :recipe_id, "", id: "selected-recipe-id" %>
        <%# Uncomment if needed:
        <div class="text-center mt-5">
          <%= submit_tag "Find your match!",
            class: "btn btn-lg btn-primary disabled",
            id: "match-button",
            data: { recipe_suggestions_target: "button" } %>
        </div>
      <% end %>
    </div>
    <div class="text-center mt-4">
  <%= link_to "← Go Back", music_suggestions_matches_path, class: "btn btn-secondary" %>
</div>
  </div>
</div>
